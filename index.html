<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Jorge del Casar</title>
  <meta name="author" content="Jorge del Casar">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jorgecasar.github.io">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Jorge del Casar" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26360643-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Jorge del Casar</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                <li >
                    <a href="/repos">Repos</a>
                </li>
                <li >
                    <a href="/talks">Talks</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:jorgecasar.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index">
      
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-01-19T19:39:54+01:00" pubdate data-updated="true">Jan 19<span>th</span>, 2014</time>
        
           | <a href="/blog/desarrollar-webapps-realtime-auth-con-passport/#disqus_thread"
             data-disqus-identifier="http://jorgecasar.github.io/blog/desarrollar-webapps-realtime-auth-con-passport/">Comments</a>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/blog/desarrollar-webapps-realtime-auth-con-passport/">Desarrollar Webapps Realtime: Auth Con Passport</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="alert alert-info">
	<p>Código en GitHub: <a href="https://github.com/jorgecasar/building-realtime-webapp">building-realtime-webapp</a>. Release: <code>auth</code>.</p>
	<p>Entorno de desarrollo en Heroku: <a href="http://building-realtime-webapp-dev.herokuapp.com/">building-realtime-webapp</a>.</p>
</div>

<p><img class="center" src="http://sailsjs.org/images/image_squidhome.png" title="Designed for developers by Giant Squid" alt="Giant Squid" /></p>

<ul id="markdown-toc">
  <li><a href="#instalar-y-configurar-passport">Instalar y configurar Passport</a></li>
  <li><a href="#acciones-login-y-logout">Acciones <code>Login</code> y <code>Logout</code></a></li>
  <li><a href="#polticas">Políticas</a></li>
  <li><a href="#actualizacin-de-vistas">Actualización de vistas</a></li>
</ul>

<p>En el artículo anterior vimos <a href="/blog/desarrollar-webapps-realtime-auth/">cómo implementar un sistema de autenticación básica</a>, y en esta ocasión vamos a implementar el sistema de autenticación usando <a href="http://passportjs.org/">Passport</a>. Passport es un middleware de autenticación para Node nos permitirá modularizar la autenticación de usuarios en nuestra aplicación y realizar inicio de sesión único con OAuth como Facebook o Twitter.</p>

</div>
  
  
    <footer>
      <a class="btn btn-default" rel="full-article" href="/blog/desarrollar-webapps-realtime-auth-con-passport/">Read on &rarr;</a>
    </footer>
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-01-18T12:40:04+01:00" pubdate data-updated="true">Jan 18<span>th</span>, 2014</time>
        
           | <a href="/blog/desarrollar-webapps-realtime-auth/#disqus_thread"
             data-disqus-identifier="http://jorgecasar.github.io/blog/desarrollar-webapps-realtime-auth/">Comments</a>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/blog/desarrollar-webapps-realtime-auth/">Desarrollar Webapps Realtime: Auth</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="alert alert-info">
	<p>Código en GitHub: <a href="https://github.com/jorgecasar/building-realtime-webapp">building-realtime-webapp</a>. Release: <code>auth</code>.</p>
	<p>Entorno de desarrollo en Heroku: <a href="http://building-realtime-webapp-dev.herokuapp.com/">building-realtime-webapp</a>.</p>
</div>

<p><img class="center" src="http://sailsjs.org/images/image_squidhome.png" title="Designed for developers by Giant Squid" alt="Giant Squid" /></p>

<ul id="markdown-toc">
  <li><a href="#cambios-en-el-layout">Cambios en el layout</a></li>
  <li><a href="#autenticacin-bsica">Autenticación básica</a>    <ul>
      <li><a href="#accin-auth">Acción <code>auth</code></a></li>
      <li><a href="#accin-login">Acción <code>Login</code></a></li>
      <li><a href="#accin-logout">Acción <code>Logout</code></a></li>
    </ul>
  </li>
  <li><a href="#polticas-de-acceso">Políticas de acceso</a>    <ul>
      <li><a href="#poltica-usuario-autenticado">Política usuario autenticado</a></li>
      <li><a href="#poltica-de-poder-administar-usuario">Política de poder Administar usuario</a></li>
    </ul>
  </li>
</ul>

<p>Siguiendo con la saga de “Desarrollar Webapps Realtime” y depués de haber visto <a href="/blog/desarrollar-webapps-realtime-creacion">Cómo empezar a crear un Webapp real-time</a> y <a href="/blog/desarrollar-webapps-realtime-usuarios">cómo crear usuarios siguiendo el patrón MVC</a>, le toca el turno a cómo autenticar a los usuarios en nuestra plataforma. Para ello vamos a hacerlo primero con nuestros propios medios para entender algunos conceptos y después lo haremos usando <a href="http://passportjs.org/">Passport for Node</a>.
</div>
  
  
    <footer>
      <a class="btn btn-default" rel="full-article" href="/blog/desarrollar-webapps-realtime-auth/">Read on &rarr;</a>
    </footer>
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-01-16T09:28:14+01:00" pubdate data-updated="true">Jan 16<span>th</span>, 2014</time>
        
           | <a href="/blog/desarrollar-webapps-realtime-usuarios/#disqus_thread"
             data-disqus-identifier="http://jorgecasar.github.io/blog/desarrollar-webapps-realtime-usuarios/">Comments</a>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/blog/desarrollar-webapps-realtime-usuarios/">Desarrollar Webapps Realtime: Usuarios</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="alert alert-info">
	<p>Código en GitHub: <a href="https://github.com/jorgecasar/building-realtime-webapp">building-realtime-webapp</a>. Release: <code>users</code>.</p>
	<p>Entorno de desarrollo en Heroku: <a href="http://building-realtime-webapp-dev.herokuapp.com/">building-realtime-webapp</a>.</p>
</div>

<p><img class="center" src="http://sailsjs.org/images/image_squidhome.png" title="Designed for developers by Giant Squid" alt="Giant Squid" /></p>

<ul id="markdown-toc">
  <li><a href="#configuracin-del-almacenamiento">Configuración del almacenamiento</a>    <ul>
      <li><a href="#configuracin-en-heroku">Configuración en Heroku</a></li>
      <li><a href="#admin-ui-para-mongodb">Admin UI para MongoDB</a></li>
    </ul>
  </li>
  <li><a href="#generar-mvc-para-user">Generar MVC para <code>User</code></a>    <ul>
      <li><a href="#probar-bd-y-api">Probar BD y API</a></li>
      <li><a href="#modelo-user">Modelo <code>User</code></a>        <ul>
          <li><a href="#encriptar-contrasea">Encriptar contraseña</a></li>
        </ul>
      </li>
      <li><a href="#controlador-usercontroller">Controlador <code>UserController</code></a></li>
      <li><a href="#vista-user">Vista <code>User</code></a></li>
    </ul>
  </li>
</ul>

<p>Hace unos días vimos <a href="/blog/desarrollar-webapps-realtime-creacion/">cómo crear webapps realtime</a> y hoy vamos a implementar la gestión de usuarios. Podemos hacerlo de forma básica o usando algun middleware como <a href="https://github.com/jaredhanson/passport">Passport</a> o <a href="https://github.com/bnoguchi/everyauth">Everyauth</a>. En este artículo empezaremos creando el controlador y el modelo <code>User</code> y posterior mente haremos la integración con un middleware para ampliar y mejorar la gestión de usuarios.
</div>
  
  
    <footer>
      <a class="btn btn-default" rel="full-article" href="/blog/desarrollar-webapps-realtime-usuarios/">Read on &rarr;</a>
    </footer>
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-01-10T10:30:09+01:00" pubdate data-updated="true">Jan 10<span>th</span>, 2014</time>
        
           | <a href="/blog/desarrollar-webapps-realtime-creacion/#disqus_thread"
             data-disqus-identifier="http://jorgecasar.github.io/blog/desarrollar-webapps-realtime-creacion/">Comments</a>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/blog/desarrollar-webapps-realtime-creacion/">Desarrollar Webapps Realtime: Creación</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="alert alert-info">
    <p>Código en GitHub: <a href="https://github.com/jorgecasar/building-realtime-webapp">building-realtime-webapp</a>. Release: <code>init</code>.</p>
</div>

<p><img class="center" src="http://sailsjs.org/images/image_squidhome.png" title="Designed for developers by Giant Squid" alt="Giant Squid" /></p>

<ul id="markdown-toc">
  <li><a href="#crear-proyecto-con-sailsjs">Crear proyecto con Sails.js</a>    <ul>
      <li><a href="#requisitos">Requisitos</a></li>
      <li><a href="#instalacin">Instalación</a></li>
      <li><a href="#crear-un-nuevo-proyecto">Crear un nuevo proyecto</a></li>
    </ul>
  </li>
  <li><a href="#crear-un-repositorio-git">Crear un repositorio git</a>    <ul>
      <li><a href="#repositorio-git-remoto-en-github">Repositorio git remoto en GitHub</a></li>
      <li><a href="#primer-commit">Primer commit</a></li>
    </ul>
  </li>
  <li><a href="#despliegue-en-heroku">Despliegue en Heroku</a>    <ul>
      <li><a href="#requisitos-1">Requisitos</a></li>
      <li><a href="#configuracin-local">Configuración local</a></li>
      <li><a href="#crear-una-aplicacin-en-heroku">Crear una aplicación en Heroku</a></li>
      <li><a href="#desplegar-el-cdigo">Desplegar el código</a></li>
    </ul>
  </li>
</ul>

<p>Hace unos meses descubrí Sails.js, un framework MVC para Node basado en Express que te facilita la creación de aplicaciones web realtime mediante Websockets. Así que no me extraña que el slogan sea:</p>
<blockquote><p>THE WEB FRAMEWORK OF YOUR DREAMS.<br />Designed for developers by Giant Squid.</p><footer><strong>Mike McNeil,</strong> <cite><a href="http://sailsjs.org/">Creator of sails.js</a></cite></footer></blockquote>
</div>
  
  
    <footer>
      <a class="btn btn-default" rel="full-article" href="/blog/desarrollar-webapps-realtime-creacion/">Read on &rarr;</a>
    </footer>
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-01-02T10:20:12+01:00" pubdate data-updated="true">Jan 2<span>nd</span>, 2014</time>
        
           | <a href="/blog/como-crear-tu-blog-en-github-pages/#disqus_thread"
             data-disqus-identifier="http://jorgecasar.github.io/blog/como-crear-tu-blog-en-github-pages/">Comments</a>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/blog/como-crear-tu-blog-en-github-pages/">Cómo Crear Tu Blog en GitHub Pages</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Qué mejor manera de inaugurar este blog que contando cómo lo he hecho. <a href="http://github.com/">Github</a> ofrece gratuitamente las <a href="http://pages.github.com/">Github Pages</a>, las cuales permiten crear páginas webs para tus proyectos, usuario y organizaciones. La mayoría de la gente conoce las páginas de los proyectos, pero también se pueden crear páginas de usuario y de organizaciones.
</div>
  
  
    <footer>
      <a class="btn btn-default" rel="full-article" href="/blog/como-crear-tu-blog-en-github-pages/">Read on &rarr;</a>
    </footer>
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous disabled"><a href="#">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next disabled"><a href="#">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/desarrollar-webapps-realtime-auth-con-passport/">Desarrollar Webapps Realtime: Auth Con Passport</a>
    
    <a class="list-group-item " href="/blog/desarrollar-webapps-realtime-auth/">Desarrollar Webapps Realtime: Auth</a>
    
    <a class="list-group-item " href="/blog/desarrollar-webapps-realtime-usuarios/">Desarrollar Webapps Realtime: Usuarios</a>
    
    <a class="list-group-item " href="/blog/desarrollar-webapps-realtime-creacion/">Desarrollar Webapps Realtime: Creación</a>
    
    <a class="list-group-item " href="/blog/como-crear-tu-blog-en-github-pages/">Cómo Crear Tu Blog en GitHub Pages</a>
    
  </div>
</section>

<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="list-group" id="gh_repos">
    <p class="loading">Status updating&#8230;</p>
  </div>
  
    <div class="gh-profile-link pull-right text-muted">
      <a href="https://github.com/jorgecasar">@jorgecasar</a> on GitHub
    </div>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jorgecasar',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">On Delicious</h3>
  </div>
  <div class="panel-body">
    <div id="delicious"></div>
    <script type="text/javascript" src="http://feeds.delicious.com/v2/json/jorgecasar?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
    <p><a href="http://delicious.com/jorgecasar">My Delicious Bookmarks &raquo;</a></p>
  </div>
</section>



<section class="googleplus panel panel-default">
  <div class="panel-body">
    <h1>
      <a href="https://plus.google.com/+JorgeDelCasarSanchez?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h1>
  </div>
</section>



      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - Jorge del Casar<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'jorgecasar';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
